function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},n={},o=e.parcelRequire440f;null==o&&((o=function(t){if(t in a)return a[t].exports;if(t in n){var e=n[t];delete n[t];var o={id:t,exports:{}};return a[t]=o,e.call(o.exports,o,o.exports),o.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){n[t]=e},e.parcelRequire440f=o);var s=o("6KOho"),r=o("kYsr5"),l=o("gngdn"),d=o("f6zku");l.extend(t(d));var i=o("gogTx"),u=o("dLCGn");l.extend(i),l.extend(u),t(r)();const c=window.location.search,f=new URLSearchParams(c),h=f.get("refreshInterval")||3e4;let p;function b(t,e,a){return"-"===t?t:t?l.tz(t,"Asia/Kolkata").format("YYYY-MM-DD kk:mm:ss"):""}function w(t,e,a){return"string"==typeof t?t:b(t)}function g(t,e,a){let n;return n=a.status.stopped?"orange":a.status.completed?"#03a652":"#524E4F",n?`<span style="color:${n};font-weight:bold;">${t}</span>`:t}function k(e,a,n,o,r){"done"===a&&t(s)(e).css("color","green"),"error"===a&&t(s)(e).css("color","red"),"running"===a&&t(s)(e).css("color","orange")}f.get("refresh")&&window.setTimeout((function(){window.location.reload()}),1e3*parseInt(h)),p=t(s)("#tblCronTasks").DataTable({ajax:"./api/scheduled-tasks",columns:[{title:"uuid",uuid:"uuid",data:"uuid",render:g},{title:"Worker",data:"worker",defaultContent:""},{title:"Task Id",data:"data.id",defaultContent:""},{title:"Task Data",className:"details-control",orderable:!1,data:null,defaultContent:'<input type="button" class="btn btn-task-data" value="Task Data">'},{title:"Created",defaultContent:"",data:function(t){return t.status.created||t.created},render:b},{title:"Schedule",data:"when",defaultContent:"",render:w},{title:"Stopped/Activated",data:function(t){return Math.max(t.status.restarted||0,t.status.stopped||0)||"-"},defaultContent:"-",render:b},{title:"Message",data:function(t){return t.message||t.error&&t.error.message||t.error||"-"},defaultContent:"-"},{title:"Actions",className:"details-control",orderable:!1,data:null,render:function(t,e,a){const n=t.status;return n.completed||n.failed||n.abandoned?"-":t.isActive?'<input class="btn btn-stop" type="button" value="Stop">':'<input class="btn btn-activate" type="button" value="Activate">'}}],order:[[4,"desc"]],columnDefs:[{targets:"_all",createdCell:k}]}),t(s)("#tblCronTasks tbody").on("click",".btn-task-data",(function(){console.log("show task data");var e=t(s)(this).closest("tr"),a=p.row(e);if(a.child.isShown())a.child.hide(),e.removeClass("shown"),t(s)(this).val("Task Data");else{const n=a.data();a.child("<pre> "+JSON.stringify(n.data||"No data",null,4)+"</pre>").show(),e.addClass("shown"),t(s)(this).val("Less")}})),t(s)("#tblCronTasks tbody").on("click",".btn-result",(function(){var e=t(s)(this).closest("tr"),a=p.row(e);if(a.child.isShown())a.child.hide(),e.removeClass("shown"),t(s)(this).val("Result");else{const n=a.data();a.child("<pre> "+JSON.stringify(n||"No result",null,4)+"</pre>").show(),e.addClass("shown"),t(s)(this).val("Less")}})),t(s)("#tblCronTasks tbody").on("click",".btn-stop",(function(){var e,a=t(s)(this).closest("tr"),n=p.row(a);e=n.data(),t(s).ajax({method:"PUT",url:`./api/task/stop/${e.uuid}`,cache:!1}).done((function(t){p.ajax.reload(null,!1)})).fail((function(t){console.error("Error: ",t.message)}))})),t(s)("#tblCronTasks tbody").on("click",".btn-activate",(function(){var e,a=t(s)(this).closest("tr"),n=p.row(a);e=n.data(),t(s).ajax({method:"PUT",url:`./api/task/restart/${e.uuid}`,cache:!1}).done((function(t){p.ajax.reload(null,!1)})).fail((function(t){console.error("Error: ",t.message)}))}));
//# sourceMappingURL=scheduled-tasks.933810e2.js.map
